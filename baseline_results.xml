<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="11" skipped="1" tests="136" time="38.015" timestamp="2025-05-27T19:23:37.935367-04:00" hostname="Cesars-Mac-mini.local"><testcase classname="vigia_detect.cli.tests.test_cli" name="test_parse_args" time="0.001" /><testcase classname="vigia_detect.cli.tests.test_cli" name="test_process_directory_empty" time="0.001" /><testcase classname="vigia_detect.cli.tests.test_cli" name="test_process_directory_with_images" time="0.001" /><testcase classname="vigia_detect.cli.tests.test_cli" name="test_process_directory_no_detections" time="0.001" /><testcase classname="vigia_detect.cli.tests.test_cli" name="test_process_directory_error_handling" time="0.001" /><testcase classname="vigia_detect.cv_pipeline.tests.test_detector" name="test_detector_initialization" time="0.000" /><testcase classname="vigia_detect.cv_pipeline.tests.test_detector" name="test_detect_with_no_detections" time="0.001" /><testcase classname="vigia_detect.cv_pipeline.tests.test_detector" name="test_detect_with_detections" time="0.001" /><testcase classname="vigia_detect.cv_pipeline.tests.test_detector" name="test_get_model_info" time="0.000" /><testcase classname="vigia_detect.cv_pipeline.tests.test_preprocessor" name="test_preprocessor_initialization" time="0.007" /><testcase classname="vigia_detect.cv_pipeline.tests.test_preprocessor" name="test_image_preprocessing_basic" time="0.072" /><testcase classname="vigia_detect.cv_pipeline.tests.test_preprocessor" name="test_face_detection_preprocessing" time="0.085" /><testcase classname="vigia_detect.cv_pipeline.tests.test_preprocessor" name="test_contrast_enhancement" time="0.002" /><testcase classname="vigia_detect.db.tests.test_supabase_client" name="test_initialization_with_env_vars" time="0.001" /><testcase classname="vigia_detect.db.tests.test_supabase_client" name="test_initialization_without_env_vars" time="0.000" /><testcase classname="vigia_detect.db.tests.test_supabase_client" name="test_get_or_create_patient_existing" time="0.001" /><testcase classname="vigia_detect.db.tests.test_supabase_client" name="test_get_or_create_patient_new" time="0.001" /><testcase classname="vigia_detect.db.tests.test_supabase_client" name="test_get_or_create_patient_no_code" time="0.001" /><testcase classname="vigia_detect.db.tests.test_supabase_client" name="test_save_detection" time="0.001" /><testcase classname="vigia_detect.db.tests.test_supabase_client" name="test_get_patient_detections" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_twilio_client.TestTwilioClient" name="test_client_initialization" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_twilio_client.TestTwilioClient" name="test_send_whatsapp" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_twilio_client.TestTwilioClient" name="test_handle_incoming_webhook" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_twilio_client.TestTwilioClient" name="test_send_whatsapp_template" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_integration" name="test_send_whatsapp_message" time="0.381" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_integration" name="test_whatsapp_message_failure" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_integration" name="test_whatsapp_webhook_processing" time="0.000"><skipped type="pytest.skip" message="Requires live WhatsApp sandbox setup">/Users/autonomos_dev/Projects/vigia/vigia_detect/messaging/tests/test_whatsapp_integration.py:46: Requires live WhatsApp sandbox setup</skipped></testcase><testcase classname="vigia_detect.messaging.tests.test_whatsapp_integration" name="test_whatsapp_templates" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_processor.TestWhatsAppProcessor" name="test_download_image" time="0.002" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_processor.TestWhatsAppProcessor" name="test_process_whatsapp_image" time="0.002" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_processor.TestWhatsAppProcessor" name="test_format_detection_results_with_detections" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_processor.TestWhatsAppProcessor" name="test_format_detection_results_without_detections" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_server.TestWhatsAppServer" name="test_index_route" time="0.003" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_server.TestWhatsAppServer" name="test_whatsapp_webhook_image" time="0.494" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_server.TestWhatsAppServer" name="test_whatsapp_webhook_text" time="0.002" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_server.TestWhatsAppServer" name="test_whatsapp_webhook_error_handling" time="0.001" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_templates.TestWhatsAppTemplates" name="test_welcome_template" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_templates.TestWhatsAppTemplates" name="test_help_template" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_templates.TestWhatsAppTemplates" name="test_results_template_with_detections" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_templates.TestWhatsAppTemplates" name="test_results_template_without_detections" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_templates.TestWhatsAppTemplates" name="test_error_template" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_templates.TestWhatsAppTemplates" name="test_processing_template" time="0.000" /><testcase classname="vigia_detect.messaging.tests.test_whatsapp_templates.TestWhatsAppTemplates" name="test_info_template" time="0.000" /><testcase classname="vigia_detect.messaging.whatsapp.tests.test_processor.TestWhatsAppProcessor" name="test_download_image" time="0.002" /><testcase classname="vigia_detect.messaging.whatsapp.tests.test_processor.TestWhatsAppProcessor" name="test_process_image_simulation" time="0.001" /><testcase classname="vigia_detect.messaging.whatsapp.tests.test_processor.TestWhatsAppProcessor" name="test_format_detection_results_no_detections" time="0.000" /><testcase classname="vigia_detect.messaging.whatsapp.tests.test_processor.TestWhatsAppProcessor" name="test_format_detection_results_with_detections" time="0.001" /><testcase classname="vigia_detect.test_slack" name="test_slack_basic" time="0.014"><failure message="pydantic_core._pydantic_core.ValidationError: 7 validation errors for Settings&#10;twilio_phone_from&#10;  Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/missing&#10;slack_signing_secret&#10;  Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/missing&#10;secret_key&#10;  Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/missing&#10;twilio_phone_number&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='+13343104976', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden&#10;slack_channel&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='#vigia', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden&#10;slack_channel_id&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='C08TJHZFVD1', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden&#10;supabase_service_key&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='your_supabase_service_key', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden">vigia_detect/test_slack.py:19: in test_slack_basic
    notifier = SlackNotifier()
vigia_detect/messaging/slack_notifier.py:33: in __init__
    from config.settings import settings
config/settings.py:94: in &lt;module&gt;
    settings = get_settings()
config/settings.py:90: in get_settings
    return Settings()
../../.pyenv/versions/3.11.7/lib/python3.11/site-packages/pydantic_settings/main.py:176: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 7 validation errors for Settings
E   twilio_phone_from
E     Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
E   slack_signing_secret
E     Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
E   secret_key
E     Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
E   twilio_phone_number
E     Extra inputs are not permitted [type=extra_forbidden, input_value='+13343104976', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
E   slack_channel
E     Extra inputs are not permitted [type=extra_forbidden, input_value='#vigia', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
E   slack_channel_id
E     Extra inputs are not permitted [type=extra_forbidden, input_value='C08TJHZFVD1', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
E   supabase_service_key
E     Extra inputs are not permitted [type=extra_forbidden, input_value='your_supabase_service_key', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden</failure></testcase><testcase classname="vigia_detect.test_slack" name="test_notification_system" time="0.003"><failure message="pydantic_core._pydantic_core.ValidationError: 7 validation errors for Settings&#10;twilio_phone_from&#10;  Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/missing&#10;slack_signing_secret&#10;  Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/missing&#10;secret_key&#10;  Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/missing&#10;twilio_phone_number&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='+13343104976', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden&#10;slack_channel&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='#vigia', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden&#10;slack_channel_id&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='C08TJHZFVD1', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden&#10;supabase_service_key&#10;  Extra inputs are not permitted [type=extra_forbidden, input_value='your_supabase_service_key', input_type=str]&#10;    For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden">vigia_detect/test_slack.py:38: in test_notification_system
    notifier = SlackNotifier()
vigia_detect/messaging/slack_notifier.py:33: in __init__
    from config.settings import settings
config/settings.py:94: in &lt;module&gt;
    settings = get_settings()
config/settings.py:90: in get_settings
    return Settings()
../../.pyenv/versions/3.11.7/lib/python3.11/site-packages/pydantic_settings/main.py:176: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 7 validation errors for Settings
E   twilio_phone_from
E     Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
E   slack_signing_secret
E     Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
E   secret_key
E     Field required [type=missing, input_value={'supabase_url': 'your_su...del_confidence': '0.25'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
E   twilio_phone_number
E     Extra inputs are not permitted [type=extra_forbidden, input_value='+13343104976', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
E   slack_channel
E     Extra inputs are not permitted [type=extra_forbidden, input_value='#vigia', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
E   slack_channel_id
E     Extra inputs are not permitted [type=extra_forbidden, input_value='C08TJHZFVD1', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
E   supabase_service_key
E     Extra inputs are not permitted [type=extra_forbidden, input_value='your_supabase_service_key', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden</failure></testcase><testcase classname="vigia_detect.test_workflow" name="test_cv_to_slack_workflow" time="0.006" /><testcase classname="vigia_detect.test_workflow" name="test_adk_agent_direct" time="0.000" /><testcase classname="vigia_detect.utils.tests.test_image_utils" name="test_list_image_files" time="0.001" /><testcase classname="vigia_detect.utils.tests.test_image_utils" name="test_list_image_files_empty_dir" time="0.000" /><testcase classname="vigia_detect.utils.tests.test_image_utils" name="test_list_image_files_nonexistent_dir" time="0.000" /><testcase classname="vigia_detect.utils.tests.test_image_utils" name="test_save_detection_result" time="0.001" /><testcase classname="vigia_detect.utils.tests.test_image_utils" name="test_crop_lpp_region" time="0.000" /><testcase classname="vigia_detect.utils.tests.test_image_utils" name="test_generate_grid_view" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_client_initialization" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_prepare_headers_without_api_key" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_prepare_headers_with_api_key" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_send_async_success" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_send_async_http_error" time="1.005" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_send_async_network_error_with_retry" time="1.004" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_send_batch_async" time="0.006" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_sync_send" time="0.001" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_webhook_id_generation" time="0.004" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_timeout_handling" time="1.004" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClient" name="test_json_response_parsing_error" time="0.008" /><testcase classname="vigia_detect.webhook.tests.test_client" name="test_context_manager" time="0.001" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClientIntegration" name="test_real_webhook_endpoint" time="0.662" /><testcase classname="vigia_detect.webhook.tests.test_client.TestWebhookClientIntegration" name="test_authentication_failure" time="4.696"><failure message="assert 405 == 401&#10; +  where 405 = WebhookResponse(success=False, status_code=405, message='Failed after 3 attempts', data={'raw': '&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2 Final//EN&quot;&gt;\n&lt;title&gt;405 Method Not Allowed&lt;/title&gt;\n&lt;h1&gt;Method Not Allowed&lt;/h1&gt;\n&lt;p&gt;The method is not allowed for the requested URL.&lt;/p&gt;\n'}).status_code">vigia_detect/webhook/tests/test_client.py:311: in test_authentication_failure
    assert response.status_code == 401
E   assert 405 == 401
E    +  where 405 = WebhookResponse(success=False, status_code=405, message='Failed after 3 attempts', data={'raw': '&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"&gt;\n&lt;title&gt;405 Method Not Allowed&lt;/title&gt;\n&lt;h1&gt;Method Not Allowed&lt;/h1&gt;\n&lt;p&gt;The method is not allowed for the requested URL.&lt;/p&gt;\n'}).status_code</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handle_detection_completed_low_risk" time="0.008" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handle_detection_completed_critical_risk" time="0.006" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handle_detection_failed" time="0.004" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handle_patient_updated_status_change" time="0.004" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handle_patient_updated_minor_change" time="0.004" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handle_protocol_triggered" time="0.005" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handle_analysis_ready" time="0.003" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_handlers_without_integrations" time="0.003"><failure message="assert True is False">vigia_detect/webhook/tests/test_handlers.py:265: in test_handlers_without_integrations
    assert result["actions_taken"]["notifications_sent"] is False
E   assert True is False</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_handlers.TestWebhookHandlers" name="test_error_handling_in_integrations" time="0.003"><failure message="Exception: Slack error">vigia_detect/webhook/tests/test_handlers.py:283: in test_error_handling_in_integrations
    result = await self.handlers.handle_detection_completed(
vigia_detect/webhook/handlers.py:80: in handle_detection_completed
    await self._send_urgent_notifications(patient_code, risk_level, detections)
vigia_detect/webhook/handlers.py:289: in _send_urgent_notifications
    await self.slack.send_notification(message, details)
../../.pyenv/versions/3.11.7/lib/python3.11/unittest/mock.py:2237: in _execute_mock_call
    raise effect
E   Exception: Slack error</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_handlers.TestCreateDefaultHandlers" name="test_create_handlers_all_disabled" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestCreateDefaultHandlers" name="test_create_handlers_no_config" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestCreateDefaultHandlers" name="test_create_handlers_with_slack" time="2.337"><failure message="AssertionError: assert None is &lt;MagicMock name='SlackNotifier()' id='13753254288'&gt;&#10; +  where None = &lt;webhook.handlers.WebhookHandlers object at 0x3575c0650&gt;.slack">vigia_detect/webhook/tests/test_handlers.py:326: in test_create_handlers_with_slack
    assert handlers.slack is mock_slack_instance
E   AssertionError: assert None is &lt;MagicMock name='SlackNotifier()' id='13753254288'&gt;
E    +  where None = &lt;webhook.handlers.WebhookHandlers object at 0x3575c0650&gt;.slack</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_handlers.TestCreateDefaultHandlers" name="test_create_handlers_slack_init_error" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestHandlersIntegration" name="test_full_detection_workflow" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_handlers.TestHandlersIntegration" name="test_concurrent_handler_execution" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_integration.TestWebhookSystemIntegration" name="test_complete_detection_workflow" time="2.525" /><testcase classname="vigia_detect.webhook.tests.test_integration.TestWebhookSystemIntegration" name="test_multiple_event_types" time="3.013"><failure message="assert 0 == 3&#10; +  where 0 = len([])&#10; +    where [] = &lt;webhook.tests.test_integration.TestWebhookSystemIntegration object at 0x333760210&gt;.received_events">vigia_detect/webhook/tests/test_integration.py:225: in test_multiple_event_types
    assert len(self.received_events) == 3
E   assert 0 == 3
E    +  where 0 = len([])
E    +    where [] = &lt;webhook.tests.test_integration.TestWebhookSystemIntegration object at 0x333760210&gt;.received_events</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_integration.TestWebhookSystemIntegration" name="test_authentication_failures" time="5.529" /><testcase classname="vigia_detect.webhook.tests.test_integration.TestWebhookSystemIntegration" name="test_concurrent_requests" time="4.029"><failure message="assert 0 == 10&#10; +  where 0 = len([])&#10; +    where [] = &lt;webhook.tests.test_integration.TestWebhookSystemIntegration object at 0x333900150&gt;.received_events">vigia_detect/webhook/tests/test_integration.py:289: in test_concurrent_requests
    assert len(self.received_events) == 10
E   assert 0 == 10
E    +  where 0 = len([])
E    +    where [] = &lt;webhook.tests.test_integration.TestWebhookSystemIntegration object at 0x333900150&gt;.received_events</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_integration.TestWebhookSystemIntegration" name="test_error_handling_in_handlers" time="2.012" /><testcase classname="vigia_detect.webhook.tests.test_integration.TestWebhookSystemIntegration" name="test_server_health_check" time="2.014" /><testcase classname="vigia_detect.webhook.tests.test_integration.TestWebhookSystemIntegration" name="test_events_endpoint" time="2.021" /><testcase classname="vigia_detect.webhook.tests.test_integration.TestRealWorldScenarios" name="test_medical_emergency_workflow" time="0.695" /><testcase classname="vigia_detect.webhook.tests.test_integration.TestRealWorldScenarios" name="test_network_resilience" time="1.006"><failure message="AssertionError: assert ('error' in 'http://localhost:99999/webhook' or 'timeout' in 'http://localhost:99999/webhook')&#10; +  where 'http://localhost:99999/webhook' = &lt;built-in method lower of str object at 0x33376a1f0&gt;()&#10; +    where &lt;built-in method lower of str object at 0x33376a1f0&gt; = 'http://localhost:99999/webhook'.lower&#10; +      where 'http://localhost:99999/webhook' = WebhookResponse(success=False, status_code=0, message='http://localhost:99999/webhook', data=None).message&#10; +  and   'http://localhost:99999/webhook' = &lt;built-in method lower of str object at 0x33376a1f0&gt;()&#10; +    where &lt;built-in method lower of str object at 0x33376a1f0&gt; = 'http://localhost:99999/webhook'.lower&#10; +      where 'http://localhost:99999/webhook' = WebhookResponse(success=False, status_code=0, message='http://localhost:99999/webhook', data=None).message">vigia_detect/webhook/tests/test_integration.py:427: in test_network_resilience
    assert "error" in response.message.lower() or "timeout" in response.message.lower()
E   AssertionError: assert ('error' in 'http://localhost:99999/webhook' or 'timeout' in 'http://localhost:99999/webhook')
E    +  where 'http://localhost:99999/webhook' = &lt;built-in method lower of str object at 0x33376a1f0&gt;()
E    +    where &lt;built-in method lower of str object at 0x33376a1f0&gt; = 'http://localhost:99999/webhook'.lower
E    +      where 'http://localhost:99999/webhook' = WebhookResponse(success=False, status_code=0, message='http://localhost:99999/webhook', data=None).message
E    +  and   'http://localhost:99999/webhook' = &lt;built-in method lower of str object at 0x33376a1f0&gt;()
E    +    where &lt;built-in method lower of str object at 0x33376a1f0&gt; = 'http://localhost:99999/webhook'.lower
E    +      where 'http://localhost:99999/webhook' = WebhookResponse(success=False, status_code=0, message='http://localhost:99999/webhook', data=None).message</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_models.TestEventType" name="test_event_type_values" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestEventType" name="test_event_type_from_string" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestEventType" name="test_invalid_event_type" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestSeverity" name="test_severity_values" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestSeverity" name="test_severity_ordering" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestDetection" name="test_detection_creation" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestDetection" name="test_detection_to_dict" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestDetection" name="test_detection_validation" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestPatientInfo" name="test_patient_info_creation" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestPatientInfo" name="test_patient_info_minimal" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestPatientInfo" name="test_patient_info_to_dict" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestDetectionPayload" name="test_detection_payload_creation" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestDetectionPayload" name="test_detection_payload_minimal" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestDetectionPayload" name="test_detection_payload_to_dict" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestWebhookEvent" name="test_webhook_event_creation" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestWebhookEvent" name="test_webhook_event_defaults" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestWebhookEvent" name="test_webhook_event_to_dict" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestWebhookEvent" name="test_webhook_event_with_detection_payload" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestWebhookResponse" name="test_webhook_response_creation" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestWebhookResponse" name="test_webhook_response_minimal" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestWebhookResponse" name="test_webhook_response_error" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestModelIntegration" name="test_complete_detection_workflow_models" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_models.TestModelIntegration" name="test_model_serialization_roundtrip" time="0.000" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_server_initialization" time="0.003" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_health_endpoint" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_events_endpoint" time="0.004" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_without_auth" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_with_invalid_auth" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_with_valid_auth_no_handlers" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_with_handler" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_with_multiple_handlers" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_with_handler_error" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_invalid_event_type" time="0.002"><failure message="AssertionError: assert 'Invalid event type' in 'Invalid event_type: invalid.event'">vigia_detect/webhook/tests/test_server.py:188: in test_webhook_endpoint_invalid_event_type
    assert "Invalid event type" in response.json()["detail"]
E   AssertionError: assert 'Invalid event type' in 'Invalid event_type: invalid.event'</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_webhook_endpoint_missing_fields" time="0.002"><failure message="assert 200 == 422&#10; +  where 200 = &lt;Response [200 OK]&gt;.status_code">vigia_detect/webhook/tests/test_server.py:200: in test_webhook_endpoint_missing_fields
    assert response.status_code == 422  # FastAPI validation error
E   assert 200 == 422
E    +  where 200 = &lt;Response [200 OK]&gt;.status_code</failure></testcase><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_register_handler_programmatically" time="0.001" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_on_event_decorator" time="0.001" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServer" name="test_sync_handler_support" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServerWithoutAuth" name="test_webhook_endpoint_no_auth_required" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServerWithoutAuth" name="test_events_endpoint_no_auth_required" time="0.001" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServerIntegration" name="test_server_startup_and_shutdown" time="0.002" /><testcase classname="vigia_detect.webhook.tests.test_server.TestWebhookServerIntegration" name="test_concurrent_webhook_requests" time="0.107" /></testsuite></testsuites>